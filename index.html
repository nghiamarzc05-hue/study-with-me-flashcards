<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Study With Me ‚Äì Flashcards</title>
  <meta name="description" content="Flashcard h·ªçc t·∫≠p: t·∫°o b·ªô, th√™m th·∫ª, h·ªçc l·∫≠t th·∫ª, random/autoplay, pomodoro, TTS, tag, backup/restore." />
  <meta name="theme-color" content="#0b0d10" />

  <!-- Open Graph (share ƒë·∫πp h∆°n) -->
  <meta property="og:title" content="Study With Me ‚Äì Flashcards" />
  <meta property="og:description" content="Flashcard h·ªçc t·∫≠p: t·∫°o b·ªô, th√™m th·∫ª, h·ªçc l·∫≠t th·∫ª, random/autoplay, pomodoro, TTS, tag, backup/restore." />
  <meta property="og:type" content="website" />

  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand-title">Study With Me</div>
      <div class="brand-sub muted">Flashcards</div>
    </div>

    <div class="top-actions">
      <button id="themeToggleTop" class="btn secondary" type="button" aria-label="ƒê·ªïi giao di·ªán">üåô Dark</button>
    </div>

    <nav class="tabs" aria-label="ƒêi·ªÅu h∆∞·ªõng">
      <button class="tab is-active" data-tab="decks">B·ªô th·∫ª</button>
      <button class="tab" data-tab="study">H·ªçc</button>
      <button class="tab" data-tab="import">Import</button>
      <button class="tab" data-tab="settings">C√†i ƒë·∫∑t</button>
      <button class="tab" data-tab="about">Gi·ªõi thi·ªáu</button>
    </nav>
  </header>

  <main class="container">
    <!-- DECKS -->
    <section class="panel" data-panel="decks">
      <div class="panel-head">
        <h1>B·ªô flashcard</h1>
        <div class="row">
          <button id="btnNewDeck" class="btn">+ T·∫°o b·ªô m·ªõi</button>
        </div>
      </div>

      <div class="grid">
        <aside class="card">
          <h2>Danh s√°ch b·ªô</h2>

          <div class="row">
            <input id="deckSearch" class="input grow" placeholder="T√¨m b·ªô (t√™n/m√¥ t·∫£/tag)..." />
          </div>

          <div class="row">
            <select id="tagFilter" class="input grow">
              <option value="">T·∫•t c·∫£ tag</option>
            </select>

            <select id="sortSelect" class="input" style="width:auto;">
              <option value="pinned_newest" selected>Ghim tr∆∞·ªõc ‚Ä¢ M·ªõi nh·∫•t</option>
              <option value="pinned_az">Ghim tr∆∞·ªõc ‚Ä¢ A‚ÜíZ</option>
              <option value="pinned_cards">Ghim tr∆∞·ªõc ‚Ä¢ Nhi·ªÅu th·∫ª</option>
            </select>

            <button id="btnClearFilter" class="btn secondary">X√≥a l·ªçc</button>
          </div>

          <div id="deckList" class="list"></div>
        </aside>

        <section class="card">
          <h2>Chi ti·∫øt b·ªô</h2>

          <div id="deckEmpty" class="muted">
            Ch·ªçn 1 b·ªô ƒë·ªÉ xem v√† ch·ªânh s·ª≠a.
          </div>

          <div id="deckDetail" class="hidden">
            <div class="row">
              <div class="grow">
                <div class="label">T√™n b·ªô</div>
                <input id="deckName" class="input" placeholder="V√≠ d·ª•: English A1" />
              </div>
              <div class="right">
                <div class="label">Thao t√°c</div>
                <div class="row">
                  <button id="btnTogglePin" class="btn secondary" type="button">‚≠ê Ghim</button>
                  <button id="btnSaveDeck" class="btn" type="button">L∆∞u</button>
                  <button id="btnDeleteDeck" class="btn danger" type="button">X√≥a b·ªô</button>
                </div>
              </div>
            </div>

            <div class="label">M√¥ t·∫£</div>
            <textarea id="deckDesc" class="input" rows="2" placeholder="M√¥ t·∫£ ng·∫Øn..."></textarea>

            <div class="label">Tags (c√°ch nhau b·∫±ng d·∫•u ph·∫©y)</div>
            <input id="deckTags" class="input" placeholder="V√≠ d·ª•: english, vocab, school" />

            <hr class="sep" />

            <div class="row">
              <h3 class="grow">Th·∫ª trong b·ªô</h3>
              <button id="btnNewCard" class="btn" type="button">+ Th√™m th·∫ª</button>
            </div>

            <div class="row">
              <input id="cardSearch" class="input grow" placeholder="T√¨m th·∫ª (front/back/tag/hint)..." />
              <button id="btnStudyThisDeck" class="btn secondary" type="button">H·ªçc b·ªô n√†y</button>
              <button id="btnExportDeckCsv" class="btn secondary" type="button">Export CSV</button>
            </div>

            <div id="cardList" class="list"></div>
          </div>
        </section>
      </div>
    </section>

    <!-- STUDY -->
    <section class="panel hidden" data-panel="study">
      <div class="panel-head">
        <h1>H·ªçc flashcard</h1>

        <div class="row">
          <select id="studyDeckSelect" class="input"></select>
          <button id="btnRandom" class="btn secondary" type="button">üé≤ Random: OFF</button>
          <button id="btnShuffle" class="btn secondary" type="button">X√°o tr·ªôn</button>
        </div>
      </div>

      <div class="study">
        <div class="row study-top">
          <div id="studyMeta" class="muted"></div>
          <div class="muted small">Ph√≠m t·∫Øt: Space=l·∫≠t ‚Ä¢ ‚Üê/‚Üí=tr∆∞·ªõc/sau ‚Ä¢ R=random ‚Ä¢ S=ƒë·ªçc</div>
        </div>

        <button id="flashcard" class="flashcard" aria-label="L·∫≠t th·∫ª">
          <div class="flashcard-inner">
            <div id="flashFront" class="face front"></div>
            <div id="flashBack" class="face back"></div>
          </div>
        </button>

        <div class="row center">
          <button id="btnPrev" class="btn secondary" type="button">‚Üê Tr∆∞·ªõc</button>
          <button id="btnFlip" class="btn" type="button">L·∫≠t</button>
          <button id="btnNext" class="btn secondary" type="button">Sau ‚Üí</button>
        </div>

        <div class="row center study-row">
          <button id="btnAutoplay" class="btn secondary" type="button">‚ñ∂ Auto</button>

          <label class="muted small inline">
            T·ªëc ƒë·ªô
            <select id="autoplaySpeed" class="input compact">
              <option value="2000">2s</option>
              <option value="3000" selected>3s</option>
              <option value="5000">5s</option>
              <option value="8000">8s</option>
            </select>
          </label>

          <button id="btnSpeak" class="btn" type="button">üîä ƒê·ªçc (m·∫∑t sau)</button>

          <label class="muted small inline">
            Gi·ªçng
            <select id="voiceSelect" class="input compact wide"></select>
          </label>

          <label class="muted small inline">
            T·ªëc ƒë·ªô ƒë·ªçc
            <select id="rateSelect" class="input compact">
              <option value="0.9">0.9x</option>
              <option value="1.0" selected>1.0x</option>
              <option value="1.1">1.1x</option>
              <option value="1.2">1.2x</option>
            </select>
          </label>
        </div>

        <div class="row center study-row">
          <div id="pomoLabel" class="muted small">Pomodoro: h·ªçc</div>
          <div id="pomoTime" class="pomo-time">25:00</div>

          <button id="btnPomoStart" class="btn" type="button">Start</button>
          <button id="btnPomoReset" class="btn secondary" type="button">Reset</button>

          <select id="pomoPreset" class="input compact">
            <option value="25,5" selected>25/5</option>
            <option value="50,10">50/10</option>
            <option value="15,3">15/3</option>
          </select>
        </div>
      </div>
    </section>

    <!-- IMPORT -->
    <section class="panel hidden" data-panel="import">
      <div class="panel-head">
        <h1>Import CSV</h1>
      </div>

      <div class="card">
        <p class="muted">
          CSV h·ªó tr·ª£ c·ªôt: <code>front,back,tag,hint</code>. C·ªôt <code>tag</code> v√† <code>hint</code> c√≥ th·ªÉ b·ªè tr·ªëng.
          D√≤ng ƒë·∫ßu c√≥ th·ªÉ l√† header.
        </p>

        <div class="row">
          <select id="importDeckSelect" class="input grow"></select>
          <button id="btnDownloadSample" class="btn secondary" type="button">T·∫£i CSV m·∫´u</button>
        </div>

        <div class="label">D√°n CSV v√†o ƒë√¢y</div>
        <textarea id="csvText" class="input" rows="10" placeholder="front,back,tag,hint&#10;apple,qu·∫£ t√°o,english,&quot;tr√°i c√¢y&quot;"></textarea>

        <div class="row">
          <button id="btnImport" class="btn" type="button">Import</button>
          <div id="importResult" class="muted"></div>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="panel hidden" data-panel="settings">
      <div class="panel-head">
        <h1>C√†i ƒë·∫∑t</h1>
      </div>

      <div class="grid">
        <section class="card">
          <h2>Giao di·ªán</h2>
          <p class="muted">Dark/Light (light ·∫•m) ‚Äî nh·ªõ l·ª±a ch·ªçn tr√™n m√°y.</p>
          <div class="row">
            <button id="themeToggleSettings" class="btn" type="button">ƒê·ªïi Dark/Light</button>
          </div>
        </section>

        <section class="card">
          <h2>Sao l∆∞u & kh√¥i ph·ª•c</h2>
          <p class="muted">Backup to√†n b·ªô d·ªØ li·ªáu (deck + th·∫ª). Khi kh√¥i ph·ª•c: b·∫°n ƒë∆∞·ª£c ch·ªçn <b>Ghi ƒë√®</b> ho·∫∑c <b>G·ªôp</b>.</p>

          <div class="row">
            <button id="btnExportJson" class="btn" type="button">‚¨á Export JSON</button>
            <label class="btn secondary file-btn" role="button">
              ‚¨Ü Import JSON
              <input id="jsonFileInput" type="file" accept=".json,application/json" hidden />
            </label>
          </div>

          <div class="row">
            <button id="btnResetAll" class="btn danger" type="button">Reset to√†n b·ªô d·ªØ li·ªáu</button>
          </div>

          <div id="backupMsg" class="muted small"></div>
        </section>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="panel hidden" data-panel="about">
      <div class="panel-head">
        <h1>Gi·ªõi thi·ªáu</h1>
      </div>
      <div class="card">
        <p>
          Web flashcard ch·∫°y thu·∫ßn HTML/CSS/JS, l∆∞u d·ªØ li·ªáu tr√™n m√°y (localStorage). 
          H·ªó tr·ª£ random/autoplay, Pomodoro, TTS, tags, backup/restore.
        </p>
        <ul class="muted">
          <li>M·∫πo: ghim ‚≠ê c√°c b·ªô b·∫°n d√πng th∆∞·ªùng xuy√™n.</li>
          <li>M·∫πo: d√πng Space/‚Üê/‚Üí ƒë·ªÉ h·ªçc nhanh.</li>
        </ul>
      </div>
    </section>
  </main>

  <!-- DIALOG: New Deck -->
  <dialog id="dlgDeck" class="dlg">
    <form method="dialog" class="dlg-body">
      <h3>T·∫°o b·ªô m·ªõi</h3>
      <div class="label">T√™n b·ªô</div>
      <input id="newDeckName" class="input" placeholder="V√≠ d·ª•: Nh·∫≠t N5" />
      <div class="label">Tags (tu·ª≥ ch·ªçn)</div>
      <input id="newDeckTags" class="input" placeholder="V√≠ d·ª•: japanese, n5" />
      <div class="row right">
        <button class="btn secondary" value="cancel">H·ªßy</button>
        <button id="btnCreateDeckConfirm" class="btn" value="ok">T·∫°o</button>
      </div>
      <p class="muted small">Tip: ƒë·∫∑t t√™n r√µ r√†ng ƒë·ªÉ kh·ªèi l·ªôn.</p>
    </form>
  </dialog>

  <!-- DIALOG: Add/Edit Card -->
  <dialog id="dlgCard" class="dlg">
    <form method="dialog" class="dlg-body">
      <h3 id="dlgCardTitle">Th√™m th·∫ª</h3>

      <div class="label">M·∫∑t tr∆∞·ªõc (front)</div>
      <input id="cardFront" class="input" placeholder="V√≠ d·ª•: apple" />

      <div class="label">M·∫∑t sau (back)</div>
      <input id="cardBack" class="input" placeholder="V√≠ d·ª•: qu·∫£ t√°o" />

      <div class="label">Tag (tu·ª≥ ch·ªçn)</div>
      <input id="cardTag" class="input" placeholder="V√≠ d·ª•: noun" />

      <div class="label">G·ª£i √Ω (hint) (tu·ª≥ ch·ªçn)</div>
      <input id="cardHint" class="input" placeholder="V√≠ d·ª•: tr√°i c√¢y" />

      <input type="hidden" id="editingCardId" />

      <div class="row right">
        <button class="btn secondary" value="cancel">H·ªßy</button>
        <button id="btnSaveCardConfirm" class="btn" value="ok">L∆∞u</button>
      </div>
    </form>
  </dialog>

  <!-- DIALOG: Restore mode -->
  <dialog id="dlgRestore" class="dlg">
    <form method="dialog" class="dlg-body">
      <h3>Kh√¥i ph·ª•c d·ªØ li·ªáu</h3>
      <p class="muted">B·∫°n mu·ªën x·ª≠ l√Ω d·ªØ li·ªáu import nh∆∞ th·∫ø n√†o?</p>

      <div class="row">
        <button id="btnRestoreOverwrite" class="btn danger" value="overwrite">Ghi ƒë√® to√†n b·ªô</button>
        <button id="btnRestoreMerge" class="btn" value="merge">G·ªôp v√†o d·ªØ li·ªáu hi·ªán c√≥</button>
      </div>

      <div class="row right">
        <button class="btn secondary" value="cancel">H·ªßy</button>
      </div>
      <p class="muted small">Tip: n·∫øu b·∫°n kh√¥ng ch·∫Øc, ch·ªçn <b>G·ªôp</b>.</p>
    </form>
  </dialog>

  <script type="module" src="./app.js"></script>
</body>
</html>
