<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Study With Me ‚Äì Flashcards</title>
  <meta name="description" content="Flashcard h·ªçc t·ª´ v·ª±ng: word/IPA/meaning/example, random/autoplay, pomodoro, TTS, tag, backup/restore." />
  <meta name="theme-color" content="#0f141b" />
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand-title">Study With Me</div>
      <div class="brand-sub muted">Flashcards</div>
    </div>

    <div class="top-actions">
      <button id="themeToggleTop" class="btn secondary" type="button" aria-label="ƒê·ªïi giao di·ªán">üåô Dark</button>
    </div>

    <nav class="tabs" aria-label="ƒêi·ªÅu h∆∞·ªõng">
      <button class="tab is-active" data-tab="decks">Ch·ªß ƒë·ªÅ</button>
      <button class="tab" data-tab="study">H·ªçc</button>
      <button class="tab" data-tab="settings">C√†i ƒë·∫∑t</button>
      <button class="tab" data-tab="about">Gi·ªõi thi·ªáu</button>
    </nav>
  </header>

  <main class="container">
    <!-- DECKS -->
    <section class="panel" data-panel="decks">
      <div class="panel-head">
        <h1>Ch·ªß ƒë·ªÅ</h1>
        <div class="row">
          <button id="btnNewDeck" class="btn">+ T·∫°o ch·ªß ƒë·ªÅ</button>
        </div>
      </div>

      <div class="card" style="margin-top:12px;">
        <div class="row">
          <input id="deckSearch" class="input grow" placeholder="T√¨m ch·ªß ƒë·ªÅ (t√™n/m√¥ t·∫£/tag)..." />
          <select id="tagFilter" class="input" style="width:auto; min-width: 160px;">
            <option value="">T·∫•t c·∫£ tag</option>
          </select>

          <select id="sortSelect" class="input" style="width:auto;">
            <option value="pinned_newest" selected>Ghim tr∆∞·ªõc ‚Ä¢ M·ªõi nh·∫•t</option>
            <option value="pinned_az">Ghim tr∆∞·ªõc ‚Ä¢ A‚ÜíZ</option>
            <option value="pinned_cards">Ghim tr∆∞·ªõc ‚Ä¢ Nhi·ªÅu th·∫ª</option>
          </select>

          <button id="btnClearFilter" class="btn secondary">X√≥a l·ªçc</button>
        </div>

        <div id="deckGrid" class="deck-grid" aria-label="Danh s√°ch ch·ªß ƒë·ªÅ"></div>
      </div>
    </section>

    <!-- STUDY -->
    <section class="panel hidden" data-panel="study">
      <div class="panel-head">
        <h1>H·ªçc flashcard</h1>

        <div class="row">
          <select id="studyDeckSelect" class="input"></select>
          <button id="btnRandom" class="btn secondary" type="button">üé≤ Random: OFF</button>
          <button id="btnShuffle" class="btn secondary" type="button">X√°o tr·ªôn</button>
        </div>
      </div>

      <div class="study">
        <div class="row study-top">
          <div id="studyMeta" class="muted"></div>
          <div class="muted small">Ph√≠m t·∫Øt: Space=l·∫≠t ‚Ä¢ ‚Üê/‚Üí=tr∆∞·ªõc/sau ‚Ä¢ R=random ‚Ä¢ S=ƒë·ªçc t·ª´</div>
        </div>

        <button id="flashcard" class="flashcard" aria-label="L·∫≠t th·∫ª">
          <div class="flashcard-inner">
            <div id="flashFront" class="face front"></div>
            <div id="flashBack" class="face back"></div>
          </div>
        </button>

        <div class="row center">
          <button id="btnPrev" class="btn secondary" type="button">‚Üê Tr∆∞·ªõc</button>
          <button id="btnFlip" class="btn" type="button">L·∫≠t</button>
          <button id="btnNext" class="btn secondary" type="button">Sau ‚Üí</button>
        </div>

        <div class="row center study-row">
          <button id="btnAutoplay" class="btn secondary" type="button">‚ñ∂ Auto</button>

          <label class="muted small inline">
            T·ªëc ƒë·ªô
            <select id="autoplaySpeed" class="input compact">
              <option value="2000">2s</option>
              <option value="3000" selected>3s</option>
              <option value="5000">5s</option>
              <option value="8000">8s</option>
            </select>
          </label>

          <button id="btnSpeak" class="btn" type="button">üîä ƒê·ªçc t·ª´</button>

          <label class="muted small inline">
            Gi·ªçng
            <select id="voiceSelect" class="input compact wide"></select>
          </label>

          <label class="muted small inline">
            T·ªëc ƒë·ªô ƒë·ªçc
            <select id="rateSelect" class="input compact">
              <option value="0.9">0.9x</option>
              <option value="1.0" selected>1.0x</option>
              <option value="1.1">1.1x</option>
              <option value="1.2">1.2x</option>
            </select>
          </label>
        </div>

        <div class="row center study-row">
          <div id="pomoLabel" class="muted small">Pomodoro: h·ªçc</div>
          <div id="pomoTime" class="pomo-time">25:00</div>

          <button id="btnPomoStart" class="btn" type="button">Start</button>
          <button id="btnPomoReset" class="btn secondary" type="button">Reset</button>

          <select id="pomoPreset" class="input compact">
            <option value="25,5" selected>25/5</option>
            <option value="50,10">50/10</option>
            <option value="15,3">15/3</option>
          </select>
        </div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="panel hidden" data-panel="settings">
      <div class="panel-head">
        <h1>C√†i ƒë·∫∑t</h1>
      </div>

      <div class="grid" style="grid-template-columns: 1fr 1fr;">
        <section class="card">
          <h2>Giao di·ªán</h2>
          <p class="muted">Dark/Light (light ·∫•m) ‚Äî nh·ªõ l·ª±a ch·ªçn tr√™n m√°y.</p>
          <div class="row">
            <button id="themeToggleSettings" class="btn" type="button">ƒê·ªïi Dark/Light</button>
          </div>
        </section>

        <section class="card">
          <h2>Sao l∆∞u & kh√¥i ph·ª•c</h2>
          <p class="muted">Backup to√†n b·ªô d·ªØ li·ªáu (deck + th·∫ª). Khi kh√¥i ph·ª•c: b·∫°n ƒë∆∞·ª£c ch·ªçn <b>Ghi ƒë√®</b> ho·∫∑c <b>G·ªôp</b>.</p>

          <div class="row">
            <button id="btnExportJson" class="btn" type="button">‚¨á Export JSON</button>
            <label class="btn secondary file-btn" role="button">
              ‚¨Ü Import JSON
              <input id="jsonFileInput" type="file" accept=".json,application/json" hidden />
            </label>
          </div>

          <div class="row">
            <button id="btnResetAll" class="btn danger" type="button">Reset to√†n b·ªô d·ªØ li·ªáu</button>
          </div>

          <div id="backupMsg" class="muted small"></div>
        </section>
      </div>
    </section>

    <!-- ABOUT -->
    <section class="panel hidden" data-panel="about">
      <div class="panel-head">
        <h1>Gi·ªõi thi·ªáu</h1>
      </div>
      <div class="card">
        <p>
          Web flashcard ch·∫°y thu·∫ßn HTML/CSS/JS, l∆∞u d·ªØ li·ªáu tr√™n m√°y (localStorage).
          T·∫≠p trung h·ªçc t·ª´ v·ª±ng: <b>word + IPA</b> (m·∫∑t tr∆∞·ªõc), <b>meaning</b> (m·∫∑t sau), v√≠ d·ª• b·∫•m <b>Xem v√≠ d·ª•</b>.
        </p>
        <ul class="muted">
          <li>TTS ch·ªâ ƒë·ªçc <b>t·ª´ ti·∫øng Anh</b> (word), kh√¥ng ƒë·ªçc nghƒ©a ti·∫øng Vi·ªát.</li>
          <li>M·∫πo: d√πng Space/‚Üê/‚Üí ƒë·ªÉ h·ªçc nhanh.</li>
        </ul>
      </div>
    </section>
  </main>

  <!-- DIALOG: New Deck -->
  <dialog id="dlgDeck" class="dlg">
    <form method="dialog" class="dlg-body">
      <h3>T·∫°o ch·ªß ƒë·ªÅ m·ªõi</h3>
      <div class="label">T√™n ch·ªß ƒë·ªÅ</div>
      <input id="newDeckName" class="input" placeholder="V√≠ d·ª•: English A1" />
      <div class="label">Tags (tu·ª≥ ch·ªçn)</div>
      <input id="newDeckTags" class="input" placeholder="V√≠ d·ª•: english, school" />
      <div class="row right">
        <button class="btn secondary" value="cancel">H·ªßy</button>
        <button id="btnCreateDeckConfirm" class="btn" value="ok">T·∫°o</button>
      </div>
      <p class="muted small">Tip: ƒë·∫∑t t√™n r√µ r√†ng ƒë·ªÉ kh·ªèi l·ªôn.</p>
    </form>
  </dialog>

  <!-- DIALOG: Deck Detail (SmartVocabPro vibe) -->
  <dialog id="dlgDeckDetail" class="dlg">
    <form method="dialog" class="dlg-body">
      <div class="row" style="justify-content:space-between;">
        <h3 style="margin:0;">Chi ti·∫øt ch·ªß ƒë·ªÅ</h3>
        <button class="btn secondary" value="close">ƒê√≥ng</button>
      </div>

      <div id="deckDetail">
        <div class="row">
          <div class="grow">
            <div class="label">T√™n ch·ªß ƒë·ªÅ</div>
            <input id="deckName" class="input" placeholder="V√≠ d·ª•: English A1" />
          </div>
          <div class="right">
            <div class="label">Thao t√°c</div>
            <div class="row">
              <button id="btnTogglePin" class="btn secondary" type="button">‚≠ê Ghim</button>
              <button id="btnSaveDeck" class="btn" type="button">L∆∞u</button>
              <button id="btnDeleteDeck" class="btn danger" type="button">X√≥a ch·ªß ƒë·ªÅ</button>
            </div>
          </div>
        </div>

        <div class="label">M√¥ t·∫£</div>
        <textarea id="deckDesc" class="input" rows="2" placeholder="M√¥ t·∫£ ng·∫Øn..."></textarea>

        <div class="label">Tags (c√°ch nhau b·∫±ng d·∫•u ph·∫©y)</div>
        <input id="deckTags" class="input" placeholder="V√≠ d·ª•: english, vocab, school" />

        <hr class="sep" />

        <div class="row">
          <h3 class="grow">Th·∫ª trong ch·ªß ƒë·ªÅ</h3>
          <button id="btnNewCard" class="btn" type="button">+ Th√™m th·∫ª</button>
        </div>

        <div class="row">
          <input id="cardSearch" class="input grow" placeholder="T√¨m th·∫ª (t·ª´/IPA/nghƒ©a/v√≠ d·ª•/tag)..." />
          <button id="btnStudyThisDeck" class="btn secondary" type="button">H·ªçc ch·ªß ƒë·ªÅ n√†y</button>
          <button id="btnExportDeckCsv" class="btn secondary" type="button">Export CSV</button>
        </div>

        <div id="cardList" class="list"></div>
      </div>
    </form>
  </dialog>

  <!-- DIALOG: Add/Edit Card -->
  <dialog id="dlgCard" class="dlg">
    <form method="dialog" class="dlg-body">
      <h3 id="dlgCardTitle">Th√™m th·∫ª</h3>

      <div class="label">T·ª´ (word)</div>
      <input id="cardWord" class="input" placeholder="V√≠ d·ª•: book" />

      <div class="label">IPA (tu·ª≥ ch·ªçn)</div>
      <input id="cardIpa" class="input" placeholder="V√≠ d·ª•: /b äk/" />

      <div class="label">Nghƒ©a (meaning)</div>
      <input id="cardMeaning" class="input" placeholder="V√≠ d·ª•: quy·ªÉn s√°ch" />

      <div class="label">C√¢u v√≠ d·ª• (example) (tu·ª≥ ch·ªçn)</div>
      <input id="cardExample" class="input" placeholder="V√≠ d·ª•: I read a book." />

      <div class="label">Tag (tu·ª≥ ch·ªçn)</div>
      <input id="cardTag" class="input" placeholder="V√≠ d·ª•: noun" />

      <input type="hidden" id="editingCardId" />

      <div class="row right">
        <button class="btn secondary" value="cancel">H·ªßy</button>
        <button id="btnSaveCardConfirm" class="btn" value="ok">L∆∞u</button>
      </div>
    </form>
  </dialog>

  <!-- DIALOG: Restore mode -->
  <dialog id="dlgRestore" class="dlg">
    <form method="dialog" class="dlg-body">
      <h3>Kh√¥i ph·ª•c d·ªØ li·ªáu</h3>
      <p class="muted">B·∫°n mu·ªën x·ª≠ l√Ω d·ªØ li·ªáu import nh∆∞ th·∫ø n√†o?</p>

      <div class="row">
        <button id="btnRestoreOverwrite" class="btn danger" value="overwrite">Ghi ƒë√® to√†n b·ªô</button>
        <button id="btnRestoreMerge" class="btn" value="merge">G·ªôp v√†o d·ªØ li·ªáu hi·ªán c√≥</button>
      </div>

      <div class="row right">
        <button class="btn secondary" value="cancel">H·ªßy</button>
      </div>
      <p class="muted small">Tip: n·∫øu b·∫°n kh√¥ng ch·∫Øc, ch·ªçn <b>G·ªôp</b>.</p>
    </form>
  </dialog>

  <script type="module" src="./app.js"></script>
</body>
</html>
